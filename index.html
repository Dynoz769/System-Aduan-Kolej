<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Aduan Pelajar</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Sistem Aduan Pelajar</h1>
            <nav class="nav">
                <button id="loginBtn" class="nav-btn">Log Masuk</button>
                <button id="registerBtn" class="nav-btn">Daftar</button>
                <button id="logoutBtn" class="nav-btn hidden">Log Keluar</button>
            </nav>
        </header>

        <div id="loginForm" class="form-container hidden">
            <h2>Log Masuk</h2>
            <form id="loginFormElement">
                <div class="form-group">
                    <label for="loginEmail">Email:</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Kata Laluan:</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <div class="form-group">
                    <label for="loginRole">Peranan:</label>
                    <select id="loginRole" required>
                        <option value="" disabled selected>Pilih Peranan</option>
                        <option value="student">Pelajar</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>
                <button type="submit">Log Masuk</button>
                <button type="button" id="cancelLogin">Batal</button>
            </form>
        </div>

        <div id="registerForm" class="form-container hidden">
            <h2>Daftar Akaun</h2>
            <form id="registerFormElement">
                <div class="form-group">
                    <label for="registerName">Nama:</label>
                    <input type="text" id="registerName" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email:</label>
                    <input type="email" id="registerEmail" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">Kata Laluan:</label>
                    <input type="password" id="registerPassword" required>
                </div>
                <div class="form-group">
                    <label for="registerRole">Peranan:</label>
                    <select id="registerRole" required>
                        <option value="" disabled selected>Pilih Peranan</option>
                        <option value="student">Pelajar</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>
                <div class="form-group" id="studentIdGroup" style="display: none;">
                    <label for="registerStudentId">No. Pelajar:</label>
                    <input type="text" id="registerStudentId">
                </div>
                <button type="submit">Daftar</button>
                <button type="button" id="cancelRegister">Batal</button>
            </form>
        </div>

        <div id="mainContent" class="hidden">
            <div id="studentDashboard" class="dashboard hidden">
                <h2>Dashboard Pelajar</h2>
                <div class="dashboard-actions" id="studentActions">
                    <button id="newComplaintBtn" class="action-btn">Buat Aduan Baru</button>
                    <button id="viewComplaintsBtn" class="action-btn">Lihat Aduan Saya</button>
                </div>

                <div id="newComplaintForm" class="form-container hidden">
                    <h3>Buat Aduan Baru</h3>
                    <form id="complaintFormElement">
                        <div class="form-group">
                            <label for="complaintCategory">Kategori Aduan:</label>
                            <select id="complaintCategory" required>
                                <option value="" disabled selected>Pilih Kategori</option>
                                <option value="akademik">Akademik</option>
                                <option value="kemudahan">Kemudahan</option>
                                <option value="kantin">Kantin</option>
                                <option value="perpustakaan">Perpustakaan</option>
                                <option value="pengangkutan">Pengangkutan</option>
                                <option value="asrama">Asrama</option>
                                <option value="lain-lain">Lain-lain</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="complaintTitle">Tajuk Aduan:</label>
                            <input type="text" id="complaintTitle" required>
                        </div>
                        <div class="form-group">
                            <label for="complaintDescription">Butiran Aduan:</label>
                            <textarea id="complaintDescription" rows="5" required></textarea>
                        </div>
                        <button type="submit">Hantar Aduan</button>
                        <button type="button" id="cancelComplaint">Batal</button>
                    </form>
                </div>

                <div id="editComplaintForm" class="form-container hidden">
                    <h3>Edit Aduan</h3>
                    <form id="editComplaintFormElement">
                        <input type="hidden" id="editComplaintId">
                        <div class="form-group">
                            <label for="editComplaintCategory">Kategori Aduan:</label>
                            <select id="editComplaintCategory" required>
                                <option value="" disabled>Pilih Kategori</option>
                                <option value="akademik">Akademik</option>
                                <option value="kemudahan">Kemudahan</option>
                                <option value="kantin">Kantin</option>
                                <option value="perpustakaan">Perpustakaan</option>
                                <option value="pengangkutan">Pengangkutan</option>
                                <option value="asrama">Asrama</option>
                                <option value="lain-lain">Lain-lain</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editComplaintTitle">Tajuk Aduan:</label>
                            <input type="text" id="editComplaintTitle" required>
                        </div>
                        <div class="form-group">
                            <label for="editComplaintDescription">Butiran Aduan:</label>
                            <textarea id="editComplaintDescription" rows="5" required></textarea>
                        </div>
                        <button type="submit">Simpan Perubahan</button>
                        <button type="button" id="cancelEditComplaint">Batal</button>
                    </form>
                </div>

                <div id="studentComplaints" class="complaints-container">
                    <h3>Senarai Aduan Saya</h3>
                    <div id="studentComplaintsList"></div>
                </div>
            </div>

            <div id="adminDashboard" class="dashboard hidden">
                <div class="dashboard-actions" id="adminActions">
                    <button id="viewAllComplaintsBtn" class="action-btn">Lihat Semua Aduan</button>
                    <button id="filterComplaintsBtn" class="action-btn">Tapis Aduan</button>
                </div>

                <div id="filterOptions" class="form-container hidden">
                    <h3>Tapis Aduan</h3>
                    <div class="filter-group">
                        <label for="filterStatus">Status:</label>
                        <select id="filterStatus">
                            <option value="">Semua Status</option>
                            <option value="baru">Baru</option>
                            <option value="dibaca">Dibaca</option>
                            <option value="diproses">Diproses</option>
                            <option value="selesai">Selesai</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="filterCategory">Kategori:</label>
                        <select id="filterCategory">
                            <option value="">Semua Kategori</option>
                            <option value="akademik">Akademik</option>
                            <option value="kemudahan">Kemudahan</option>
                            <option value="kantin">Kantin</option>
                            <option value="perpustakaan">Perpustakaan</option>
                            <option value="pengangkutan">Pengangkutan</option>
                            <option value="asrama">Asrama</option>
                            <option value="lain-lain">Lain-lain</option>
                        </select>
                    </div>
                    <button id="applyFilter" class="action-btn">Terapkan Tapisan</button>
                </div>

                <div id="adminComplaints" class="complaints-container">
                    <h3>Senarai Aduan</h3>
                    <div id="adminComplaintsList"></div>
                </div>
            </div>
        </div>

        <div id="welcomeScreen" class="welcome-screen">
            <h2>Selamat Datang ke Sistem Aduan Pelajar</h2>
            <p>Sila log masuk atau daftar untuk menggunakan sistem ini.</p>
        </div>
    </div>

    <script src="auth.js"></script>
    <script src="complaints.js"></script>
    <script src="admin.js"></script>
    <script src="app.js"></script>
</body>
</html>